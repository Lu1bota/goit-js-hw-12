{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49643579-021fb679616bd716ef3622271';\n\nexport async function getImagesByQuery(query, page) {\n  const response = await axios('https://pixabay.com/api/', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n\n  return response.data;\n}\n// export function getImagesByQuery(query, page) {\n//   return axios('https://pixabay.com/api/', {\n//     params: {\n//       key: API_KEY,\n//       q: query,\n//       image_type: 'photo',\n//       orientation: 'horizontal',\n//       safesearch: true,\n//       per_page: 15,\n//     },\n//   })\n//     .then(response => {\n//       console.log(response.data);\n\n//       if (response.data.hits.length === 0) {\n//         iziToast.error({\n//           title: 'Error',\n//           message:\n//             'Sorry, there are no images matching your search query. Please try again!',\n//           position: 'topRight',\n//         });\n//         return;\n//       }\n\n//       return response.data;\n//     })\n//     .catch(() => {\n//       iziToast.error({\n//         title: 'Error',\n//         message:\n//           'Sorry, there are no images matching your search query. Please try again!',\n//       });\n//     });\n// }\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.querySelector('.loader');\nconst fragment = document.createDocumentFragment();\nconst list = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.btn-load-more');\n\nloader.classList.remove('loader');\n\nexport function createGallery(images) {\n  images.forEach(item => {\n    const li = document.createElement('li');\n    li.classList.add('list-item');\n    li.innerHTML = `\n  <div class=\"image-container\">\n    <a class=\"item-link\" href=\"${item.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${item.webformatURL}\"\n      alt=\"${item.tags}\"\n    />\n  </a>\n  </div>\n  <div class=\"container-item\">\n  <div class=\"container-follow\">\n  <strong>Likes</strong>\n  <span>${item.likes}</span>\n  </div>\n  <div class=\"container-follow\">\n  <strong>Views</strong>\n  <span>${item.views}</span>\n  </div>\n  <div class=\"container-follow\">\n  <strong>Comments</strong>\n  <span>${item.comments}</span>\n  </div>\n  <div class=\"container-follow\">\n  <strong>Downloads</strong>\n  <span>${item.downloads}</span>\n  </div>\n  </div>`;\n    fragment.append(li);\n  });\n\n  list.append(fragment);\n}\n\nexport let lightbox = new SimpleLightbox('.item-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function clearGallery() {\n  list.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.add('loader');\n}\n\nexport function hideLoader() {\n  loader.classList.remove('loader');\n}\n\nexport function showLoadMoreButton() {\n  btnLoadMore.hidden = false;\n  btnLoadMore.classList.add('btn-load-more');\n}\n\nexport function hideLoadMoreButton() {\n  btnLoadMore.hidden = true;\n  btnLoadMore.classList.remove('btn-load-more');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  clearGallery,\n  createGallery,\n  lightbox,\n  hideLoader,\n  showLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst input = form.querySelector('input');\nconst btnLoadMore = document.querySelector('.btn-load-more');\n\nform.addEventListener('submit', handleSubmit);\nbtnLoadMore.addEventListener('click', handleCLick);\n\nlet pageImg = 1;\nlet userRequest = '';\nasync function handleSubmit(event) {\n  try {\n    event.preventDefault();\n    clearGallery();\n\n    if (!input.value.trim().length) return;\n    if (userRequest !== input.value) {\n      pageImg = 1;\n      //   console.log(page);\n    }\n    userRequest = input.value;\n\n    showLoader();\n    const data = await getImagesByQuery(input.value, pageImg);\n    console.log(data);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      hideLoader();\n      return;\n    }\n    createGallery(data.hits);\n    lightbox.refresh();\n    hideLoader();\n    pageImg++;\n    console.log(pageImg);\n    showLoadMoreButton();\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n\nasync function handleCLick() {\n  try {\n    hideLoadMoreButton();\n    showLoader();\n    const data = await getImagesByQuery(input.value, pageImg);\n    createGallery(data.hits);\n    pageImg++;\n    lightbox.refresh();\n    showLoadMoreButton();\n    hideLoader();\n    console.log(pageImg);\n    console.log(userRequest);\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n// function handleSubmit(event) {\n//   event.preventDefault();\n//   clearGallery();\n\n//   if (!input.value.trim().length) return;\n\n//   showLoader();\n//   getImagesByQuery(input.value, page)\n//     .then(response => {\n//       console.log(response.data);\n\n//       if (response.data.hits.length === 0) return;\n\n//       return response.data;\n//     })\n//     .then(response => {\n//       const list = document.querySelector('.gallery');\n//       createGallery(response.hits);\n//       lightbox.refresh();\n//     })\n//     .catch(() => {\n//       iziToast.error({\n//         title: 'Error',\n//         message:\n//           'Sorry, there are no images matching your search query. Please try again!',\n//         position: 'topRight',\n//       });\n//     })\n//     .finally(() => {\n//       hideLoader();\n//     });\n// }\n"],"names":["API_KEY","getImagesByQuery","query","page","axios","loader","fragment","list","btnLoadMore","createGallery","images","item","li","lightbox","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","handleSubmit","handleCLick","pageImg","userRequest","event","data","iziToast","error"],"mappings":"+vBAEA,MAAMA,EAAU,qCAET,eAAeC,EAAiBC,EAAOC,EAAM,CAalD,OAZiB,MAAMC,EAAM,2BAA4B,CACvD,OAAQ,CACN,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACL,CAAG,GAEe,IAClB,CCfA,MAAME,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,yBACpBC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAc,SAAS,cAAc,gBAAgB,EAE3DH,EAAO,UAAU,OAAO,QAAQ,EAEzB,SAASI,EAAcC,EAAQ,CACpCA,EAAO,QAAQC,GAAQ,CACrB,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAU,IAAI,WAAW,EAC5BA,EAAG,UAAY;AAAA;AAAA,iCAEcD,EAAK,aAAa;AAAA;AAAA;AAAA,aAGtCA,EAAK,YAAY;AAAA,aACjBA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAOZA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,UAIVA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,UAIVA,EAAK,QAAQ;AAAA;AAAA;AAAA;AAAA,UAIbA,EAAK,SAAS;AAAA;AAAA,UAGpBL,EAAS,OAAOM,CAAE,CACtB,CAAG,EAEDL,EAAK,OAAOD,CAAQ,CACtB,CAEO,IAAIO,EAAW,IAAIC,EAAe,aAAc,CACrD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,GAAe,CAC7BR,EAAK,UAAY,EACnB,CAEO,SAASS,GAAa,CAC3BX,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEO,SAASY,GAAa,CAC3BZ,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEO,SAASa,GAAqB,CACnCV,EAAY,OAAS,GACrBA,EAAY,UAAU,IAAI,eAAe,CAC3C,CAEO,SAASW,GAAqB,CACnCX,EAAY,OAAS,GACrBA,EAAY,UAAU,OAAO,eAAe,CAC9C,CC5DA,MAAMY,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,cAAc,OAAO,EAClCZ,EAAc,SAAS,cAAc,gBAAgB,EAE3DY,EAAK,iBAAiB,SAAUE,CAAY,EAC5Cd,EAAY,iBAAiB,QAASe,CAAW,EAEjD,IAAIC,EAAU,EACVC,EAAc,GAClB,eAAeH,EAAaI,EAAO,CACjC,GAAI,CAIF,GAHAA,EAAM,eAAc,EACpBX,IAEI,CAACM,EAAM,MAAM,KAAM,EAAC,OAAQ,OAC5BI,IAAgBJ,EAAM,QACxBG,EAAU,GAGZC,EAAcJ,EAAM,MAEpBL,IACA,MAAMW,EAAO,MAAM1B,EAAiBoB,EAAM,MAAOG,CAAO,EAGxD,GAFA,QAAQ,IAAIG,CAAI,EAEZA,EAAK,KAAK,SAAW,EAAG,CAC1BC,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UAClB,CAAO,EACDX,IACA,MACD,CACDR,EAAckB,EAAK,IAAI,EACvBd,EAAS,QAAO,EAChBI,IACAO,IACA,QAAQ,IAAIA,CAAO,EACnBN,GACD,OAAQW,EAAO,CACd,QAAQ,MAAMA,EAAM,OAAO,CAC5B,CACH,CAEA,eAAeN,GAAc,CAC3B,GAAI,CACFJ,IACAH,IACA,MAAMW,EAAO,MAAM1B,EAAiBoB,EAAM,MAAOG,CAAO,EACxDf,EAAckB,EAAK,IAAI,EACvBH,IACAX,EAAS,QAAO,EAChBK,IACAD,IACA,QAAQ,IAAIO,CAAO,EACnB,QAAQ,IAAIC,CAAW,CACxB,OAAQI,EAAO,CACd,QAAQ,MAAMA,EAAM,OAAO,CAC5B,CACH"}